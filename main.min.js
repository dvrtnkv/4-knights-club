let resizeHandled=!1,autoplayTimer=null,startTime=0,isRunning=!0;const debounce=(e,t=300,s=!1,r=0)=>(...a)=>(r&&clearTimeout(r),s&&e.apply(this,a),r=setTimeout(()=>(s||e.apply(this,a),r=null),t)),get=(e,t,s=document.body)=>t?s.querySelector(e):s.querySelectorAll(e),getGap=(e,t={})=>(t=e.media.find(({query:e})=>window.matchMedia(e).matches))?t.value:e.default,getVIC=(e,t,s)=>Math.floor(Math.max((e+s)/(t+s),1)+.02),getOffset=(e,t,s)=>-((e+t)*Math.max(...s)),cfg={animatedAttr:"animated",instantAttr:"instant-transform",membersAutoplay:!0,membersCount:6,membersGaps:{default:20,media:[{query:"(max-width: 375px)",value:32}]},membersInstantCssVar:"--offset",membersVIO:[1,2,3],stagesCurrAttr:"data-current",stagesInstantCssVar:"--translate-x",stagesSlides:5},el={animated:get(`[${cfg.animatedAttr}]`,0),membersContainer:get(".members__container",1),membersList:get(".members__list",1),membersListItems:get(".members__list-item",0),membersControls:get(".members__controls",1),membersVIC:get(".members__controls-counter_vic",1),membersPrevBtn:get(".members__controls-btn_prev",1),membersNextBtn:get(".members__controls-btn_next",1),membersTimer:get(".timer",1),stagesContainer:get(".stages__list-container",1),stagesList:get(".stages__list",1),stagesDots:get(".stages__carousel-dot",0),stagesPrevBtn:get(".stages__carousel-btn_prev",1),stagesNextBtn:get(".stages__carousel-btn_next",1)},getInfo=(e,t)=>({sContainerW:e.stagesContainer.clientWidth,sOffset:window.matchMedia("(max-width: 849px)").matches?-(stagesState.currentIndex*(e.stagesContainer.clientWidth+20)*1):0,mItemW:e.membersListItems[0].offsetWidth,mGap:getGap(t.membersGaps),mVICV:getVIC(e.membersContainer.offsetWidth,e.membersListItems[0].offsetWidth,getGap(t.membersGaps)),mTotalSlides:t.membersCount/getVIC(e.membersContainer.offsetWidth,e.membersListItems[0].offsetWidth,getGap(t.membersGaps)),mInitOffset:getOffset(e.membersListItems[0].offsetWidth,getGap(t.membersGaps),t.membersVIO)}),instantAttr=cfg.instantAttr,membersAutoplay=cfg.membersAutoplay,membersCount=cfg.membersCount,membersVIO=cfg.membersVIO,membersInstant=cfg.membersInstantCssVar,stagesInstant=cfg.stagesInstantCssVar,stagesCurrAttr=cfg.stagesCurrAttr,stagesTotalSlides=cfg.stagesSlides,animated=el.animated,membersContainer=el.membersContainer,membersControls=el.membersControls,membersItem=el.membersListItems[0],membersList=el.membersList,membersNextBtn=el.membersNextBtn,membersPrevBtn=el.membersPrevBtn,membersVIC=el.membersVIC,membersTimer=el.membersTimer,stagesContainer=el.stagesContainer,stagesDots=el.stagesDots,stagesList=el.stagesList,stagesNextBtn=el.stagesNextBtn,stagesPrevBtn=el.stagesPrevBtn,enableInstantTransform=e=>(!e.hasAttribute(instantAttr)||"false"===e.getAttribute(instantAttr))&&e.setAttribute(instantAttr,"true"),disableInstantTransform=e=>e.hasAttribute(instantAttr)&&"true"===e.getAttribute(instantAttr)&&e.setAttribute(instantAttr,"false"),debouncedDisableInstantTransform=e=>debounce(disableInstantTransform(e),300),membersObserver=new IntersectionObserver(e=>e.forEach(e=>syncAutoplay(e.isIntersecting&&membersAutoplay?"default":"pause"))),animatedObserver=new IntersectionObserver(e=>e.forEach(e=>e.target.setAttribute("paused",`${!e.isIntersecting}`))),addEventListeners=()=>{stagesPrevBtn.onclick=()=>moveStages(-1,null),stagesNextBtn.onclick=()=>moveStages(1,null),stagesDots.forEach(e=>e.onclick=e=>{moveStages(null,Array.from(stagesDots).indexOf(e.target))}),membersPrevBtn.onclick=()=>moveMembers(1),membersNextBtn.onclick=()=>moveMembers(-1),membersControls.onmouseenter=()=>syncAutoplay("pause"),membersControls.onmouseleave=()=>syncAutoplay("default"),membersList.ontransitionend=()=>handleSwap(),membersObserver.observe(membersContainer),animated.forEach(e=>{e.onmouseenter=()=>e.setAttribute("paused","true"),e.onmouseleave=()=>e.setAttribute("paused","false"),animatedObserver.observe(e)}),window.onresize=()=>handleResize()},membersState={autoplayEnabled:membersAutoplay,currentIndex:0,isSwap:!1,dir:null,warp:0,itemW:0,offset:0,initOffset:0,totalSlides:0,vic:0,gap:20},stagesState={currentIndex:0,offset:0,containerW:0},init=()=>{document.documentElement.removeAttribute("class"),addEventListeners();let e=getInfo(el,cfg),t={itemW:e.mItemW,initOffset:e.mInitOffset,offset:e.mInitOffset,totalSlides:e.mTotalSlides,vic:e.mVICV,gap:e.mGap},s={containerW:e.sContainerW};Object.assign(membersState,t),Object.assign(stagesState,s),membersVIC.textContent=e.mVICV,enableInstantTransform(membersList),membersList.style.setProperty(membersInstant,e.mInitOffset+"px"),debouncedDisableInstantTransform(membersList)},moveStages=(e,t)=>{let{currentIndex:s,containerW:r}=stagesState,a=null!==e?s+e:t,m=-(a*(r+20)*1);stagesList.style.setProperty(stagesInstant,m+"px"),stagesPrevBtn.disabled=0===a,stagesNextBtn.disabled=a===stagesTotalSlides-1,stagesDots[s].removeAttribute(stagesCurrAttr),stagesDots[a].setAttribute(stagesCurrAttr,!0),stagesState.currentIndex=a,stagesState.offset=m},moveMembers=e=>{disableMembersBtns();let{currentIndex:t,totalSlides:s,gap:r,vic:a,offset:m,itemW:n}=membersState,i=(n+r)*a,o=-1===e?m-i:m+i,b=-1===e?t+1:t-1,l=(b+1)*a,d={currentIndex:b,offset:o,dir:e,isSwap:-1===e?b===s:0===t};Object.assign(membersState,d),membersVIC.textContent=-1===e?d.isSwap?a:l:d.isSwap?membersCount:l,membersList.style.setProperty(membersInstant,o+"px")},handleSwap=()=>{let{dir:e,vic:t,initOffset:s,isSwap:r,totalSlides:a,itemW:m,gap:n,warp:i}=membersState;r&&!i&&(membersVIC.textContent=-1===e?t:membersCount,membersState.currentIndex=-1===e?0:a-1,membersState.offset=-1===e?s:s+-((m+n)*t*(a-1)*1),warpSwap()),i||enableMembersBtns()},warpSwap=()=>{membersState.warp=1,enableInstantTransform(membersList),membersList.style.setProperty(membersInstant,membersState.offset+"px"),deactivateWarp()},deactivateWarp=debounce(()=>{membersState.isSwap=!1,membersState.dir=null,membersState.warp=0,disableInstantTransform(membersList),enableMembersBtns()},10),enableMembersBtns=()=>{membersPrevBtn.disabled=!1,membersNextBtn.disabled=!1},disableMembersBtns=()=>{membersPrevBtn.disabled=!0,membersNextBtn.disabled=!0},syncAutoplay=e=>{membersAutoplay&&(autoplayTimer&&clearTimeout(autoplayTimer),membersState.autoplayEnabled="pause"!==e,membersState.autoplayEnabled?(startTimer(),autoplayTimer=setInterval(()=>{membersNextBtn.click(),startTimer()},4e3),membersControls.classList.add("members__controls--running"),membersControls.classList.remove("members__controls--paused")):(stopTimer(),membersControls.classList.add("members__controls--paused"),membersControls.classList.remove("members__controls--running")))},handleResize=()=>{resizeHandled||(syncAutoplay("pause"),enableInstantTransform(membersList),enableInstantTransform(stagesList),debouncedResizeChanges(),resizeHandled=!0)},debouncedResizeChanges=debounce(()=>{let e=getInfo(el,cfg),t={containerW:e.sContainerW,offset:e.sOffset},s={itemW:e.mItemW,gap:e.mGap,vic:e.mVICV,totalSlides:e.mTotalSlides,initOffset:e.mInitOffset,currentIndex:0,offset:e.mInitOffset};Object.assign(stagesState,t),Object.assign(membersState,s),stagesList.style.setProperty(stagesInstant,e.sOffset+"px"),disableInstantTransform(stagesList),membersVIC.textContent=e.mVICV,membersList.style.setProperty(membersInstant,e.mInitOffset+"px"),disableInstantTransform(membersList),resizeHandled=!1,syncAutoplay("default")},250),now=()=>performance.now(),update=()=>{if(!isRunning)return;let e=now()-startTime,t=4e3-e,s=Math.max(0,Math.min(100,t/4e3*100));membersTimer.style.setProperty("--progress",s),t>0&&requestAnimationFrame(update)},startTimer=()=>{startTime=now(),isRunning=!0,membersTimer.style.setProperty("--visibility","visible"),requestAnimationFrame(update)},stopTimer=()=>{isRunning=!1,membersTimer.style.setProperty("--visibility","hidden"),cancelAnimationFrame(update)};document.addEventListener("DOMContentLoaded",()=>{init()});